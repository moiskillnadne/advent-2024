
# День 10: Быстрее Вперёд

Вы все прибываете на Лавовый Производственный Объект на парящем острове в небе. Пока остальные начинают исследовать огромный промышленный комплекс, вы чувствуете, как маленький носик тыкает вас в ногу, и опускаете взгляд, чтобы увидеть оленя в каске.

Олень держит книгу под названием "Гид по пешим маршрутам Лавового острова". Однако, когда вы открываете книгу, то обнаруживаете, что большая её часть, похоже, была обожжена лавой! Когда вы собираетесь спросить, чем можно помочь, олень приносит пустую топографическую карту окружающей местности (ваш ввод задачи) и с воодушевлением смотрит на вас.

Возможно, вы сможете помочь восстановить пропавшие маршруты?

Топографическая карта указывает высоту в каждой позиции, используя шкалу от 0 (самая низкая) до 9 (самая высокая). Например:

```
0123
1234
8765
9876
```

Основываясь на уцелевших кусках книги, вы определяете, что хороший маршрут — это максимально длинный маршрут с равномерным постепенным подъёмом. Практически это означает, что маршрут — это любой путь, начинающийся на высоте 0, заканчивающийся на высоте 9 и увеличивающийся ровно на 1 по высоте на каждом шаге. Маршруты никогда не включают диагональные шаги — только вверх, вниз, влево или вправо (с точки зрения карты).

Вы поднимаете взгляд от карты и замечаете, что олень уже начал собирать небольшую кучу карандашей, маркеров, линейки, компасы, наклейки и другие инструменты, которые могут понадобиться для обновления карты с маршрутами.

Начальная точка маршрута — это любая позиция, начинающая один или несколько маршрутов. Здесь эти позиции всегда будут иметь высоту 0. Собирая больше обрывков страниц, вы устанавливаете, что счёт начальной точки — это количество позиций с высотой 9, достижимых из этой точки по маршруту. В приведённом выше примере единственная начальная точка в левом верхнем углу имеет счёт 1, так как она может достичь одной 9 (той, что в нижнем левом углу).

Эта начальная точка имеет счёт 2:

```
...0...
...1...
...2...
6543456
7.....7
8.....8
9.....9
```

(Позиции, отмеченные ., являются непроходимыми тайлами для упрощения этих примеров; они не появляются на вашей реальной топографической карте.)

Эта начальная точка имеет счёт 4, так как каждая 9 достижима через маршрут, кроме той, что сразу слева от начальной точки:

```
..90..9
...1.98
...2..7
6543456
765.987
876....
987....
```

Эта топографическая карта содержит две начальные точки; начальная точка вверху имеет счёт 1, в то время как начальная точка внизу имеет счёт 2:

```
10..9..
2...8..
3...7..
4567654
...8..3
...9..2
.....01
```

Вот более крупный пример:

```
89010123
78121874
87430965
96549874
45678903
32019012
01329801
10456732
```

Этот крупный пример содержит 9 начальных точек. Учитывая начальные точки в порядке чтения, их счёты равны 5, 6, 5, 3, 1, 3, 5, 3 и 5. Суммируя эти счёты, сумма всех начальных точек равна 36.

Олень с восторгом приносит транспортир и добавляет его к куче. **Какова сумма всех счётов начальных точек на вашей топографической карте?**

## Часть Вторая

Олень несколько минут изучает вашу карту маршрутов, прежде чем осознать что-то, исчезает на пару минут, а затем возвращается с ещё одним слегка обожжённым листом бумаги.

На листе описан второй способ измерения начальной точки, называемый её рейтингом. Рейтинг начальной точки — это количество различных маршрутов, начинающихся в этой точке. Например:

```
.....0.
..4321.
..5..2.
..6543.
..7..4.
..8765.
..9....
```

На карте выше одна начальная точка; её рейтинг равен 3, так как существует ровно три различных маршрута, начинающихся в этой позиции:

```
.....0.   .....0.   .....0.
..4321.   .....1.   .....1.
..5....   .....2.   .....2.
..6....   ..6543.   .....3.
..7....   ..7....   .....4.
..8....   ..8....   ..8765.
..9....   ..9....   ..9....
```

Вот карта, содержащая одну начальную точку с рейтингом 13:

```
..90..9
...1.98
...2..7
6543456
765.987
876....
987....
```

Эта карта содержит одну начальную точку с рейтингом 227 (поскольку существует 121 различных маршрутов, ведущих к 9 на правом краю, и 106 — к 9 на нижнем краю):

```
012345
123456
234567
345678
4.6789
56789.
```

Вот тот же крупный пример, что и раньше:

```
89010123
78121874
87430965
96549874
45678903
32019012
01329801
10456732
```

Учитывая начальные точки в порядке чтения, их рейтинги равны 20, 24, 10, 4, 1, 4, 5, 8 и 5. Сумма всех рейтингов начальных точек на этой крупной топографической карте равна 81.

Вы не уверены, как, но олень, похоже, сделал маленькие флажки из зубочисток и кусочков бумаги и использует их для маркировки начальных точек на вашей топографической карте. **Какова сумма рейтингов всех начальных точек?**
