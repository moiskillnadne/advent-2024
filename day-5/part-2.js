const input = "43|66\n" +
    "84|81\n" +
    "84|11\n" +
    "91|77\n" +
    "91|67\n" +
    "91|11\n" +
    "88|11\n" +
    "88|69\n" +
    "88|99\n" +
    "88|37\n" +
    "16|63\n" +
    "16|28\n" +
    "16|19\n" +
    "16|91\n" +
    "16|33\n" +
    "71|64\n" +
    "71|91\n" +
    "71|77\n" +
    "71|26\n" +
    "71|15\n" +
    "71|66\n" +
    "64|32\n" +
    "64|89\n" +
    "64|18\n" +
    "64|75\n" +
    "64|34\n" +
    "64|11\n" +
    "64|33\n" +
    "32|45\n" +
    "32|21\n" +
    "32|99\n" +
    "32|89\n" +
    "32|94\n" +
    "32|17\n" +
    "32|26\n" +
    "32|84\n" +
    "17|12\n" +
    "17|43\n" +
    "17|53\n" +
    "17|46\n" +
    "17|36\n" +
    "17|13\n" +
    "17|24\n" +
    "17|91\n" +
    "17|75\n" +
    "34|94\n" +
    "34|68\n" +
    "34|41\n" +
    "34|23\n" +
    "34|89\n" +
    "34|33\n" +
    "34|17\n" +
    "34|18\n" +
    "34|97\n" +
    "34|87\n" +
    "89|74\n" +
    "89|46\n" +
    "89|85\n" +
    "89|69\n" +
    "89|71\n" +
    "89|99\n" +
    "89|26\n" +
    "89|97\n" +
    "89|22\n" +
    "89|15\n" +
    "89|68\n" +
    "39|12\n" +
    "39|23\n" +
    "39|88\n" +
    "39|19\n" +
    "39|66\n" +
    "39|16\n" +
    "39|75\n" +
    "39|89\n" +
    "39|62\n" +
    "39|41\n" +
    "39|91\n" +
    "39|28\n" +
    "36|62\n" +
    "36|24\n" +
    "36|13\n" +
    "36|26\n" +
    "36|16\n" +
    "36|34\n" +
    "36|39\n" +
    "36|15\n" +
    "36|43\n" +
    "36|35\n" +
    "36|75\n" +
    "36|85\n" +
    "36|71\n" +
    "94|17\n" +
    "94|64\n" +
    "94|15\n" +
    "94|43\n" +
    "94|72\n" +
    "94|91\n" +
    "94|13\n" +
    "94|24\n" +
    "94|74\n" +
    "94|36\n" +
    "94|35\n" +
    "94|49\n" +
    "94|71\n" +
    "94|53\n" +
    "85|53\n" +
    "85|77\n" +
    "85|91\n" +
    "85|64\n" +
    "85|26\n" +
    "85|49\n" +
    "85|66\n" +
    "85|13\n" +
    "85|67\n" +
    "85|88\n" +
    "85|46\n" +
    "85|63\n" +
    "85|34\n" +
    "85|62\n" +
    "85|23\n" +
    "41|99\n" +
    "41|69\n" +
    "41|68\n" +
    "41|81\n" +
    "41|13\n" +
    "41|35\n" +
    "41|15\n" +
    "41|22\n" +
    "41|94\n" +
    "41|37\n" +
    "41|74\n" +
    "41|32\n" +
    "41|11\n" +
    "41|36\n" +
    "41|89\n" +
    "41|85\n" +
    "33|36\n" +
    "33|97\n" +
    "33|41\n" +
    "33|81\n" +
    "33|32\n" +
    "33|89\n" +
    "33|94\n" +
    "33|69\n" +
    "33|45\n" +
    "33|71\n" +
    "33|19\n" +
    "33|15\n" +
    "33|99\n" +
    "33|11\n" +
    "33|18\n" +
    "33|17\n" +
    "33|24\n" +
    "72|91\n" +
    "72|21\n" +
    "72|53\n" +
    "72|77\n" +
    "72|28\n" +
    "72|71\n" +
    "72|26\n" +
    "72|46\n" +
    "72|13\n" +
    "72|16\n" +
    "72|75\n" +
    "72|39\n" +
    "72|49\n" +
    "72|34\n" +
    "72|62\n" +
    "72|12\n" +
    "72|66\n" +
    "72|67\n" +
    "24|66\n" +
    "24|85\n" +
    "24|23\n" +
    "24|62\n" +
    "24|28\n" +
    "24|67\n" +
    "24|71\n" +
    "24|64\n" +
    "24|15\n" +
    "24|16\n" +
    "24|91\n" +
    "24|21\n" +
    "24|46\n" +
    "24|88\n" +
    "24|12\n" +
    "24|49\n" +
    "24|72\n" +
    "24|13\n" +
    "24|39\n" +
    "12|67\n" +
    "12|66\n" +
    "12|84\n" +
    "12|18\n" +
    "12|28\n" +
    "12|89\n" +
    "12|63\n" +
    "12|32\n" +
    "12|33\n" +
    "12|34\n" +
    "12|41\n" +
    "12|49\n" +
    "12|75\n" +
    "12|87\n" +
    "12|77\n" +
    "12|91\n" +
    "12|43\n" +
    "12|88\n" +
    "12|53\n" +
    "12|64\n" +
    "18|24\n" +
    "18|72\n" +
    "18|11\n" +
    "18|22\n" +
    "18|74\n" +
    "18|94\n" +
    "18|36\n" +
    "18|41\n" +
    "18|17\n" +
    "18|89\n" +
    "18|32\n" +
    "18|84\n" +
    "18|13\n" +
    "18|71\n" +
    "18|69\n" +
    "18|45\n" +
    "18|35\n" +
    "18|68\n" +
    "18|97\n" +
    "18|81\n" +
    "18|85\n" +
    "22|64\n" +
    "22|62\n" +
    "22|74\n" +
    "22|99\n" +
    "22|12\n" +
    "22|24\n" +
    "22|49\n" +
    "22|39\n" +
    "22|17\n" +
    "22|46\n" +
    "22|35\n" +
    "22|37\n" +
    "22|36\n" +
    "22|71\n" +
    "22|16\n" +
    "22|26\n" +
    "22|97\n" +
    "22|15\n" +
    "22|81\n" +
    "22|21\n" +
    "22|72\n" +
    "22|13\n" +
    "26|63\n" +
    "26|23\n" +
    "26|91\n" +
    "26|62\n" +
    "26|77\n" +
    "26|41\n" +
    "26|46\n" +
    "26|75\n" +
    "26|43\n" +
    "26|28\n" +
    "26|53\n" +
    "26|19\n" +
    "26|33\n" +
    "26|66\n" +
    "26|67\n" +
    "26|18\n" +
    "26|49\n" +
    "26|88\n" +
    "26|34\n" +
    "26|12\n" +
    "26|64\n" +
    "26|87\n" +
    "26|39\n" +
    "62|28\n" +
    "62|68\n" +
    "62|63\n" +
    "62|23\n" +
    "62|18\n" +
    "62|32\n" +
    "62|33\n" +
    "62|69\n" +
    "62|16\n" +
    "62|91\n" +
    "62|88\n" +
    "62|64\n" +
    "62|19\n" +
    "62|84\n" +
    "62|43\n" +
    "62|66\n" +
    "62|41\n" +
    "62|53\n" +
    "62|34\n" +
    "62|67\n" +
    "62|75\n" +
    "62|77\n" +
    "62|87\n" +
    "62|89\n" +
    "11|81\n" +
    "11|17\n" +
    "11|37\n" +
    "11|16\n" +
    "11|74\n" +
    "11|39\n" +
    "11|72\n" +
    "11|85\n" +
    "11|24\n" +
    "11|35\n" +
    "11|36\n" +
    "11|22\n" +
    "11|62\n" +
    "11|13\n" +
    "11|94\n" +
    "11|97\n" +
    "11|49\n" +
    "11|99\n" +
    "11|26\n" +
    "11|21\n" +
    "11|12\n" +
    "11|71\n" +
    "11|46\n" +
    "11|15\n" +
    "13|67\n" +
    "13|28\n" +
    "13|66\n" +
    "13|87\n" +
    "13|75\n" +
    "13|77\n" +
    "13|53\n" +
    "13|39\n" +
    "13|88\n" +
    "13|91\n" +
    "13|26\n" +
    "13|19\n" +
    "13|46\n" +
    "13|62\n" +
    "13|63\n" +
    "13|64\n" +
    "13|21\n" +
    "13|12\n" +
    "13|34\n" +
    "13|16\n" +
    "13|33\n" +
    "13|49\n" +
    "13|23\n" +
    "13|43\n" +
    "81|72\n" +
    "81|17\n" +
    "81|49\n" +
    "81|46\n" +
    "81|13\n" +
    "81|21\n" +
    "81|43\n" +
    "81|26\n" +
    "81|15\n" +
    "81|85\n" +
    "81|91\n" +
    "81|24\n" +
    "81|94\n" +
    "81|99\n" +
    "81|16\n" +
    "81|74\n" +
    "81|12\n" +
    "81|62\n" +
    "81|36\n" +
    "81|75\n" +
    "81|64\n" +
    "81|71\n" +
    "81|39\n" +
    "81|35\n" +
    "19|11\n" +
    "19|15\n" +
    "19|36\n" +
    "19|37\n" +
    "19|89\n" +
    "19|99\n" +
    "19|84\n" +
    "19|24\n" +
    "19|17\n" +
    "19|41\n" +
    "19|85\n" +
    "19|71\n" +
    "19|32\n" +
    "19|18\n" +
    "19|74\n" +
    "19|22\n" +
    "19|94\n" +
    "19|69\n" +
    "19|35\n" +
    "19|45\n" +
    "19|97\n" +
    "19|81\n" +
    "19|68\n" +
    "19|72\n" +
    "15|66\n" +
    "15|46\n" +
    "15|23\n" +
    "15|49\n" +
    "15|77\n" +
    "15|12\n" +
    "15|28\n" +
    "15|85\n" +
    "15|91\n" +
    "15|53\n" +
    "15|16\n" +
    "15|39\n" +
    "15|88\n" +
    "15|34\n" +
    "15|87\n" +
    "15|67\n" +
    "15|43\n" +
    "15|62\n" +
    "15|64\n" +
    "15|75\n" +
    "15|21\n" +
    "15|26\n" +
    "15|13\n" +
    "15|63\n" +
    "97|36\n" +
    "97|26\n" +
    "97|64\n" +
    "97|43\n" +
    "97|81\n" +
    "97|21\n" +
    "97|46\n" +
    "97|39\n" +
    "97|85\n" +
    "97|49\n" +
    "97|99\n" +
    "97|24\n" +
    "97|16\n" +
    "97|72\n" +
    "97|94\n" +
    "97|62\n" +
    "97|71\n" +
    "97|75\n" +
    "97|35\n" +
    "97|15\n" +
    "97|12\n" +
    "97|74\n" +
    "97|13\n" +
    "97|17\n" +
    "23|88\n" +
    "23|63\n" +
    "23|77\n" +
    "23|19\n" +
    "23|32\n" +
    "23|68\n" +
    "23|41\n" +
    "23|74\n" +
    "23|11\n" +
    "23|18\n" +
    "23|89\n" +
    "23|87\n" +
    "23|22\n" +
    "23|45\n" +
    "23|99\n" +
    "23|84\n" +
    "23|94\n" +
    "23|69\n" +
    "23|97\n" +
    "23|81\n" +
    "23|17\n" +
    "23|33\n" +
    "23|28\n" +
    "23|37\n" +
    "67|22\n" +
    "67|89\n" +
    "67|66\n" +
    "67|77\n" +
    "67|81\n" +
    "67|18\n" +
    "67|37\n" +
    "67|19\n" +
    "67|69\n" +
    "67|87\n" +
    "67|68\n" +
    "67|28\n" +
    "67|23\n" +
    "67|97\n" +
    "67|34\n" +
    "67|32\n" +
    "67|33\n" +
    "67|94\n" +
    "67|11\n" +
    "67|63\n" +
    "67|88\n" +
    "67|84\n" +
    "67|45\n" +
    "67|41\n" +
    "37|74\n" +
    "37|85\n" +
    "37|81\n" +
    "37|17\n" +
    "37|35\n" +
    "37|39\n" +
    "37|36\n" +
    "37|13\n" +
    "37|26\n" +
    "37|62\n" +
    "37|94\n" +
    "37|71\n" +
    "37|64\n" +
    "37|16\n" +
    "37|49\n" +
    "37|15\n" +
    "37|99\n" +
    "37|12\n" +
    "37|97\n" +
    "37|72\n" +
    "37|24\n" +
    "37|46\n" +
    "37|43\n" +
    "37|21\n" +
    "35|46\n" +
    "35|13\n" +
    "35|85\n" +
    "35|21\n" +
    "35|64\n" +
    "35|67\n" +
    "35|34\n" +
    "35|62\n" +
    "35|26\n" +
    "35|66\n" +
    "35|15\n" +
    "35|39\n" +
    "35|75\n" +
    "35|71\n" +
    "35|49\n" +
    "35|16\n" +
    "35|12\n" +
    "35|24\n" +
    "35|23\n" +
    "35|53\n" +
    "35|43\n" +
    "35|28\n" +
    "35|72\n" +
    "35|91\n" +
    "28|88\n" +
    "28|81\n" +
    "28|89\n" +
    "28|33\n" +
    "28|17\n" +
    "28|41\n" +
    "28|18\n" +
    "28|84\n" +
    "28|19\n" +
    "28|63\n" +
    "28|74\n" +
    "28|87\n" +
    "28|22\n" +
    "28|69\n" +
    "28|97\n" +
    "28|68\n" +
    "28|32\n" +
    "28|94\n" +
    "28|45\n" +
    "28|37\n" +
    "28|36\n" +
    "28|11\n" +
    "28|99\n" +
    "28|77\n" +
    "69|12\n" +
    "69|94\n" +
    "69|37\n" +
    "69|15\n" +
    "69|99\n" +
    "69|49\n" +
    "69|97\n" +
    "69|22\n" +
    "69|11\n" +
    "69|21\n" +
    "69|36\n" +
    "69|26\n" +
    "69|35\n" +
    "69|81\n" +
    "69|85\n" +
    "69|46\n" +
    "69|13\n" +
    "69|45\n" +
    "69|39\n" +
    "69|74\n" +
    "69|24\n" +
    "69|72\n" +
    "69|71\n" +
    "69|17\n" +
    "53|34\n" +
    "53|37\n" +
    "53|41\n" +
    "53|89\n" +
    "53|97\n" +
    "53|18\n" +
    "53|63\n" +
    "53|19\n" +
    "53|67\n" +
    "53|11\n" +
    "53|68\n" +
    "53|28\n" +
    "53|77\n" +
    "53|88\n" +
    "53|87\n" +
    "53|22\n" +
    "53|84\n" +
    "53|81\n" +
    "53|32\n" +
    "53|23\n" +
    "53|69\n" +
    "53|33\n" +
    "53|45\n" +
    "53|66\n" +
    "74|71\n" +
    "74|35\n" +
    "74|13\n" +
    "74|34\n" +
    "74|67\n" +
    "74|99\n" +
    "74|62\n" +
    "74|72\n" +
    "74|36\n" +
    "74|21\n" +
    "74|43\n" +
    "74|15\n" +
    "74|12\n" +
    "74|91\n" +
    "74|85\n" +
    "74|64\n" +
    "74|53\n" +
    "74|49\n" +
    "74|24\n" +
    "74|46\n" +
    "74|75\n" +
    "74|39\n" +
    "74|26\n" +
    "74|16\n" +
    "87|72\n" +
    "87|99\n" +
    "87|71\n" +
    "87|94\n" +
    "87|19\n" +
    "87|37\n" +
    "87|18\n" +
    "87|33\n" +
    "87|24\n" +
    "87|45\n" +
    "87|81\n" +
    "87|32\n" +
    "87|35\n" +
    "87|36\n" +
    "87|97\n" +
    "87|41\n" +
    "87|89\n" +
    "87|69\n" +
    "87|74\n" +
    "87|68\n" +
    "87|11\n" +
    "87|22\n" +
    "87|84\n" +
    "87|17\n" +
    "66|11\n" +
    "66|68\n" +
    "66|32\n" +
    "66|33\n" +
    "66|23\n" +
    "66|94\n" +
    "66|69\n" +
    "66|22\n" +
    "66|18\n" +
    "66|63\n" +
    "66|45\n" +
    "66|81\n" +
    "66|88\n" +
    "66|37\n" +
    "66|87\n" +
    "66|89\n" +
    "66|84\n" +
    "66|19\n" +
    "66|41\n" +
    "66|74\n" +
    "66|28\n" +
    "66|17\n" +
    "66|77\n" +
    "66|97\n" +
    "75|89\n" +
    "75|28\n" +
    "75|34\n" +
    "75|33\n" +
    "75|66\n" +
    "75|88\n" +
    "75|67\n" +
    "75|45\n" +
    "75|69\n" +
    "75|22\n" +
    "75|77\n" +
    "75|37\n" +
    "75|11\n" +
    "75|19\n" +
    "75|53\n" +
    "75|84\n" +
    "75|63\n" +
    "75|91\n" +
    "75|18\n" +
    "75|23\n" +
    "75|87\n" +
    "75|32\n" +
    "75|41\n" +
    "75|68\n" +
    "63|22\n" +
    "63|17\n" +
    "63|99\n" +
    "63|68\n" +
    "63|11\n" +
    "63|87\n" +
    "63|19\n" +
    "63|89\n" +
    "63|81\n" +
    "63|32\n" +
    "63|41\n" +
    "63|94\n" +
    "63|84\n" +
    "63|45\n" +
    "63|97\n" +
    "63|72\n" +
    "63|69\n" +
    "63|74\n" +
    "63|35\n" +
    "63|24\n" +
    "63|33\n" +
    "63|36\n" +
    "63|18\n" +
    "63|37\n" +
    "45|97\n" +
    "45|15\n" +
    "45|49\n" +
    "45|74\n" +
    "45|85\n" +
    "45|35\n" +
    "45|81\n" +
    "45|71\n" +
    "45|94\n" +
    "45|24\n" +
    "45|72\n" +
    "45|62\n" +
    "45|21\n" +
    "45|26\n" +
    "45|36\n" +
    "45|13\n" +
    "45|99\n" +
    "45|11\n" +
    "45|22\n" +
    "45|39\n" +
    "45|46\n" +
    "45|12\n" +
    "45|37\n" +
    "45|17\n" +
    "46|33\n" +
    "46|67\n" +
    "46|32\n" +
    "46|62\n" +
    "46|88\n" +
    "46|53\n" +
    "46|43\n" +
    "46|39\n" +
    "46|16\n" +
    "46|64\n" +
    "46|18\n" +
    "46|75\n" +
    "46|23\n" +
    "46|12\n" +
    "46|41\n" +
    "46|87\n" +
    "46|66\n" +
    "46|91\n" +
    "46|49\n" +
    "46|28\n" +
    "46|34\n" +
    "46|63\n" +
    "46|77\n" +
    "46|19\n" +
    "77|68\n" +
    "77|33\n" +
    "77|94\n" +
    "77|41\n" +
    "77|74\n" +
    "77|89\n" +
    "77|63\n" +
    "77|69\n" +
    "77|18\n" +
    "77|11\n" +
    "77|81\n" +
    "77|87\n" +
    "77|84\n" +
    "77|35\n" +
    "77|37\n" +
    "77|32\n" +
    "77|22\n" +
    "77|97\n" +
    "77|36\n" +
    "77|19\n" +
    "77|17\n" +
    "77|99\n" +
    "77|24\n" +
    "77|45\n" +
    "49|66\n" +
    "49|32\n" +
    "49|19\n" +
    "49|88\n" +
    "49|33\n" +
    "49|67\n" +
    "49|28\n" +
    "49|41\n" +
    "49|18\n" +
    "49|89\n" +
    "49|16\n" +
    "49|64\n" +
    "49|91\n" +
    "49|63\n" +
    "49|75\n" +
    "49|84\n" +
    "49|23\n" +
    "49|34\n" +
    "49|62\n" +
    "49|68\n" +
    "49|43\n" +
    "49|77\n" +
    "49|87\n" +
    "49|53\n" +
    "68|12\n" +
    "68|69\n" +
    "68|22\n" +
    "68|17\n" +
    "68|15\n" +
    "68|81\n" +
    "68|37\n" +
    "68|71\n" +
    "68|72\n" +
    "68|26\n" +
    "68|35\n" +
    "68|11\n" +
    "68|46\n" +
    "68|13\n" +
    "68|24\n" +
    "68|39\n" +
    "68|36\n" +
    "68|85\n" +
    "68|45\n" +
    "68|74\n" +
    "68|21\n" +
    "68|94\n" +
    "68|97\n" +
    "68|99\n" +
    "99|72\n" +
    "99|26\n" +
    "99|35\n" +
    "99|36\n" +
    "99|75\n" +
    "99|24\n" +
    "99|62\n" +
    "99|39\n" +
    "99|66\n" +
    "99|49\n" +
    "99|85\n" +
    "99|46\n" +
    "99|34\n" +
    "99|15\n" +
    "99|64\n" +
    "99|67\n" +
    "99|53\n" +
    "99|21\n" +
    "99|16\n" +
    "99|43\n" +
    "99|91\n" +
    "99|71\n" +
    "99|13\n" +
    "99|12\n" +
    "21|46\n" +
    "21|53\n" +
    "21|75\n" +
    "21|43\n" +
    "21|39\n" +
    "21|87\n" +
    "21|16\n" +
    "21|49\n" +
    "21|62\n" +
    "21|63\n" +
    "21|88\n" +
    "21|77\n" +
    "21|19\n" +
    "21|34\n" +
    "21|91\n" +
    "21|33\n" +
    "21|12\n" +
    "21|28\n" +
    "21|66\n" +
    "21|64\n" +
    "21|26\n" +
    "21|67\n" +
    "21|18\n" +
    "21|23\n" +
    "43|89\n" +
    "43|34\n" +
    "43|84\n" +
    "43|77\n" +
    "43|18\n" +
    "43|87\n" +
    "43|28\n" +
    "43|22\n" +
    "43|23\n" +
    "43|67\n" +
    "43|32\n" +
    "43|11\n" +
    "43|88\n" +
    "43|69\n" +
    "43|19\n" +
    "43|68\n" +
    "43|75\n" +
    "43|41\n" +
    "43|53\n" +
    "43|91\n" +
    "43|45\n" +
    "43|63\n" +
    "43|33\n" +
    "84|71\n" +
    "84|94\n" +
    "84|74\n" +
    "84|24\n" +
    "84|46\n" +
    "84|26\n" +
    "84|17\n" +
    "84|68\n" +
    "84|13\n" +
    "84|45\n" +
    "84|85\n" +
    "84|15\n" +
    "84|37\n" +
    "84|35\n" +
    "84|97\n" +
    "84|21\n" +
    "84|99\n" +
    "84|69\n" +
    "84|39\n" +
    "84|72\n" +
    "84|22\n" +
    "84|36\n" +
    "91|37\n" +
    "91|87\n" +
    "91|69\n" +
    "91|88\n" +
    "91|18\n" +
    "91|97\n" +
    "91|53\n" +
    "91|84\n" +
    "91|19\n" +
    "91|34\n" +
    "91|33\n" +
    "91|22\n" +
    "91|32\n" +
    "91|66\n" +
    "91|28\n" +
    "91|41\n" +
    "91|45\n" +
    "91|68\n" +
    "91|23\n" +
    "91|89\n" +
    "91|63\n" +
    "88|87\n" +
    "88|77\n" +
    "88|68\n" +
    "88|81\n" +
    "88|74\n" +
    "88|94\n" +
    "88|19\n" +
    "88|17\n" +
    "88|33\n" +
    "88|22\n" +
    "88|63\n" +
    "88|35\n" +
    "88|97\n" +
    "88|18\n" +
    "88|32\n" +
    "88|84\n" +
    "88|45\n" +
    "88|36\n" +
    "88|89\n" +
    "88|41\n" +
    "16|41\n" +
    "16|75\n" +
    "16|89\n" +
    "16|88\n" +
    "16|53\n" +
    "16|64\n" +
    "16|45\n" +
    "16|43\n" +
    "16|23\n" +
    "16|87\n" +
    "16|67\n" +
    "16|69\n" +
    "16|18\n" +
    "16|32\n" +
    "16|66\n" +
    "16|68\n" +
    "16|77\n" +
    "16|84\n" +
    "16|34\n" +
    "71|53\n" +
    "71|12\n" +
    "71|16\n" +
    "71|23\n" +
    "71|88\n" +
    "71|28\n" +
    "71|49\n" +
    "71|62\n" +
    "71|75\n" +
    "71|13\n" +
    "71|21\n" +
    "71|46\n" +
    "71|67\n" +
    "71|85\n" +
    "71|39\n" +
    "71|43\n" +
    "71|63\n" +
    "71|34\n" +
    "64|91\n" +
    "64|88\n" +
    "64|43\n" +
    "64|66\n" +
    "64|77\n" +
    "64|67\n" +
    "64|87\n" +
    "64|19\n" +
    "64|41\n" +
    "64|69\n" +
    "64|23\n" +
    "64|53\n" +
    "64|28\n" +
    "64|84\n" +
    "64|68\n" +
    "64|45\n" +
    "64|63\n" +
    "32|15\n" +
    "32|35\n" +
    "32|22\n" +
    "32|68\n" +
    "32|11\n" +
    "32|97\n" +
    "32|36\n" +
    "32|69\n" +
    "32|72\n" +
    "32|37\n" +
    "32|24\n" +
    "32|71\n" +
    "32|74\n" +
    "32|13\n" +
    "32|85\n" +
    "32|81\n" +
    "17|85\n" +
    "17|15\n" +
    "17|67\n" +
    "17|74\n" +
    "17|16\n" +
    "17|21\n" +
    "17|35\n" +
    "17|72\n" +
    "17|99\n" +
    "17|64\n" +
    "17|71\n" +
    "17|26\n" +
    "17|62\n" +
    "17|39\n" +
    "17|49\n" +
    "34|69\n" +
    "34|45\n" +
    "34|63\n" +
    "34|32\n" +
    "34|81\n" +
    "34|84\n" +
    "34|28\n" +
    "34|66\n" +
    "34|19\n" +
    "34|22\n" +
    "34|11\n" +
    "34|77\n" +
    "34|37\n" +
    "34|88\n" +
    "89|81\n" +
    "89|94\n" +
    "89|72\n" +
    "89|84\n" +
    "89|24\n" +
    "89|13\n" +
    "89|17\n" +
    "89|45\n" +
    "89|36\n" +
    "89|11\n" +
    "89|21\n" +
    "89|37\n" +
    "89|35\n" +
    "39|64\n" +
    "39|33\n" +
    "39|87\n" +
    "39|53\n" +
    "39|67\n" +
    "39|77\n" +
    "39|32\n" +
    "39|18\n" +
    "39|49\n" +
    "39|43\n" +
    "39|63\n" +
    "39|34\n" +
    "36|64\n" +
    "36|67\n" +
    "36|49\n" +
    "36|53\n" +
    "36|21\n" +
    "36|46\n" +
    "36|12\n" +
    "36|72\n" +
    "36|66\n" +
    "36|23\n" +
    "36|91\n" +
    "94|26\n" +
    "94|12\n" +
    "94|21\n" +
    "94|75\n" +
    "94|85\n" +
    "94|99\n" +
    "94|46\n" +
    "94|16\n" +
    "94|39\n" +
    "94|62\n" +
    "85|12\n" +
    "85|43\n" +
    "85|39\n" +
    "85|21\n" +
    "85|28\n" +
    "85|33\n" +
    "85|16\n" +
    "85|75\n" +
    "85|87\n" +
    "41|84\n" +
    "41|17\n" +
    "41|97\n" +
    "41|21\n" +
    "41|71\n" +
    "41|24\n" +
    "41|45\n" +
    "41|72\n" +
    "33|72\n" +
    "33|74\n" +
    "33|35\n" +
    "33|37\n" +
    "33|68\n" +
    "33|84\n" +
    "33|22\n" +
    "72|64\n" +
    "72|43\n" +
    "72|23\n" +
    "72|15\n" +
    "72|85\n" +
    "72|88\n" +
    "24|34\n" +
    "24|43\n" +
    "24|75\n" +
    "24|26\n" +
    "24|53\n" +
    "12|16\n" +
    "12|62\n" +
    "12|19\n" +
    "12|23\n" +
    "18|99\n" +
    "18|15\n" +
    "18|37\n" +
    "22|85\n" +
    "22|94\n" +
    "26|16\n" +
    "\n\n" +
    "87,63,45,41,37,19,18,88,97,28,89,53,33,22,11,67,34\n" +
    "84,69,45,11,22,37,97,94,17,99,36,35,24,72,15,85,21,26,46\n" +
    "77,32,69,11,94,74,35\n" +
    "46,67,74,26,99,35,13,21,36,71,72,39,12\n" +
    "97,17,99,36,35,71,15,85,13,26,46,49,43\n" +
    "68,22,45,81,94,33,74,18,11,19,41,71,69,97,84,17,24,35,89,32,99,36,37\n" +
    "17,49,74,39,16,46,24,81,26\n" +
    "13,64,88,49,16,21,46,23,12,75,53,85,77,62,71\n" +
    "33,18,41,68,69,45,11,22,37,97,81,17,99,36,24,72,71\n" +
    "49,64,43,75,53,67,34,66,28,77,63,19,18,41,32,89,84\n" +
    "35,36,24,21,72,75,49,46,74,81,39\n" +
    "23,88,77,19,84,11,74\n" +
    "11,33,88,84,45,66,22,89,87,41,17\n" +
    "77,63,33,18,41,32,84,69,45,37,97,81,74,99,36\n" +
    "64,66,13,28,67,16,91,23,12,75,85,53,87,49,43\n" +
    "81,19,89,17,11,36,99,69,18,63,22,97,41,84,77,87,74,45,33,37,32,35,94\n" +
    "97,33,69,66,32,28,45,11,19,63,84,18,81,23,77,22,68,67,89,34,88,37,87\n" +
    "16,64,43,75,91,53,67,34,66,23,28,88,77,63,87,33,19,18,41,32,89,84,69\n" +
    "66,28,88,63,41,32,69,45,22,37,97,81,17\n" +
    "16,91,34,66,23,28,88,77,33,19,32,89,84,68,69\n" +
    "72,43,91,26,62,46,23,21,13,34,85,66,24,75,35,67,16\n" +
    "36,72,71,15,21,16,43,91,67,34,66\n" +
    "23,63,89,37,81\n" +
    "12,91,33,43,13,21,87,88,67,46,34,28,23,75,77\n" +
    "33,18,41,22,37,97,99,35,71\n" +
    "21,64,75,34,23,28,77\n" +
    "19,89,45,15,71,22,69\n" +
    "99,26,12,62,64\n" +
    "37,97,81,94,17,74,99,36,35,15,85,13,26,46,39,12,49,16,64\n" +
    "85,13,21,46,12,49,62,43,75,91,67,23,28,88,77\n" +
    "91,53,66,23,28,88,63,18,89,84,45,11,22\n" +
    "64,91,21,53,12,99,46,72,71,36,17,16,39,62,24,85,35,43,74,26,15,49,13\n" +
    "24,72,71,15,85,13,21,26,46,39,12,49,62,16,64,43,75,91,67,34,66,23,28\n" +
    "84,69,11,97,94,15,46\n" +
    "16,75,67,53,87,89,12,64,23\n" +
    "13,71,11,45,84,81,89,68,22,69,21,99,17,26,94\n" +
    "28,45,34,19,63,97,77\n" +
    "66,11,53,87,68,23,22,33,75,77,45,84,69,34,89,28,32,41,91\n" +
    "23,28,88,77,63,87,19,18,41,32,89,84,68,69,45,11,22,37,81,17,74\n" +
    "37,81,17,74,24,85,46,49,64\n" +
    "28,67,24,64,43,15,53\n" +
    "19,18,41,32,68,45,11,22,37,81,17,99,36,35,24,71,15\n" +
    "68,11,17,36,21\n" +
    "33,18,67,34,66,23,64,12,16,39,88,62,53,49,28,77,43,75,19,87,32\n" +
    "17,37,15,11,74,81,32,68,35,36,89,85,84,94,71,13,22,21,24,99,97\n" +
    "85,21,62,67,34,88,87\n" +
    "62,13,72,15,16,17,21,71,94,35,97,24,36,12,49,74,64\n" +
    "28,87,33,41,84,68,11,74,99\n" +
    "13,26,46,39,12,49,62,16,64,75,91,53,67,34,66,23,28,88,77,87,33\n" +
    "16,64,43,75,91,67,34,66,23,28,88,77,63,87,33,19,18,41,89,84,68\n" +
    "41,32,89,45,11,22,81,94,17,74,99,24,71,85,13\n" +
    "74,99,36,35,24,72,71,85,13,21,39,12,49,62,16,43,75,53,67\n" +
    "91,17,36,62,13,53,16,99,39\n" +
    "66,23,28,88,77,63,87,33,19,18,41,89,45,11,17\n" +
    "66,33,67,91,68,53,75\n" +
    "87,33,19,41,32,89,84,68,45,11,22,37,81,94,17,74,99,36,35,24,72\n" +
    "18,84,22,37,34,89,28,33,19,23,11,87,63,41,69,68,81,88,32,94,97,77,66\n" +
    "15,26,12,13,75,62,71,46,85,72,64,16,35,81,99,21,94,39,17,24,49,43,36\n" +
    "63,41,66,87,19,28,39,33,49,64,18\n" +
    "13,71,53,39,23,15,16,24,72,28,46\n" +
    "39,35,36,26,21,12,94,99,71,15,13,81,85,97,11,37,72,46,74,22,49,17,62\n" +
    "53,34,66,28,88,77,63,87,33,19,18,41,32,89,84,68,69,45,11,22,97\n" +
    "17,74,45,32,35,13,11,37,21,94,89,36,22,99,85\n" +
    "37,18,28,68,17,84,88,81,94,87,77\n" +
    "88,68,63,18,77,64,67,41,32,23,91,75,89,87,19,45,66,84,69,33,43\n" +
    "37,18,41,84,63,88,33,91,66,67,68,89,22,77,23,28,53,11,45,19,69\n" +
    "11,37,22,85,24,69,99,94,46,97,17,15,45,36,35,71,39,21,13\n" +
    "17,21,49,35,15,36,16\n" +
    "35,72,36,85,74,37,26,69,22,24,71,94,11,81,17,84,13,97,45,89,99\n" +
    "84,22,37,97,81,94,17,36,35,72,46\n" +
    "99,36,35,24,72,71,15,85,21,46,39,12,49,62,16,43,91\n" +
    "72,12,35,17,99,36,53\n" +
    "53,67,34,66,23,28,88,63,87,33,19,18,41,89,69,45,22,37,97\n" +
    "71,94,69,36,85,12,72\n" +
    "32,63,34,39,91,66,67,87,16\n" +
    "84,63,87,77,68,23,53,32,75,91,33,19,11,34,22,18,45,67,89,69,88\n" +
    "75,53,67,34,66,23,28,88,63,87,33,18,41,32,84,45,11\n" +
    "74,99,36,24,71,15,85,26,46,39,62,16,43,75,91,53,67\n" +
    "81,69,87,36,45,99,84,32,18,35,22,24,63,89,11,74,97\n" +
    "87,49,53,39,41,28,19,16,66,77,64,46,12,34,67,18,75,33,63,91,62\n" +
    "43,91,53,67,23,87,84,45,11\n" +
    "84,41,74,94,99,72,87,37,18,97,32\n" +
    "89,35,94,72,17,87,11\n" +
    "28,81,89,87,68,94,69,74,84,63,97,23,17,18,41,32,22,77,37,88,11\n" +
    "89,22,97,94,99,72,71,15,85\n" +
    "71,85,13,46,49,16,43,34,66,23,88\n" +
    "28,88,77,63,87,33,19,18,41,32,89,84,68,69,45,11,37,97,81,94,17,74,99\n" +
    "62,46,43,21,24,35,49,12,17,94,36,16,85,75,91\n" +
    "45,22,37,97,81,17,74,99,35,72,85,26,46,39,49\n" +
    "12,49,16,64,43,75,91,53,67,34,66,23,77,63,87,33,18,32,89\n" +
    "12,74,15,94,69,22,24\n" +
    "39,17,24,16,36,62,22,37,85,74,12,49,71,46,26,94,13,99,21,81,35\n" +
    "72,71,85,46,12,49,16,43,75,91,53,67,66,28,88\n" +
    "75,91,53,67,34,66,23,28,63,33,18,68,69,11,22\n" +
    "91,23,34,49,66\n" +
    "41,63,66,16,77,64,49,28,91,75,43,67,88,84,87,89,53,19,62,18,34\n" +
    "24,72,13,12,49,62,75,23,28\n" +
    "74,99,24,15,13,39,12,16,64,43,67\n" +
    "89,32,23,63,11,28,45,41,22,87,75,91,18,19,66\n" +
    "18,74,11,69,77,37,36,94,35,81,19\n" +
    "35,21,26,46,49,64,75,91,53,67,23\n" +
    "11,22,97,81,17,36,72,15,21,26,46,39,12,49,62\n" +
    "64,41,69,19,77,84,45\n" +
    "84,45,37,74,99,36,72,21,46\n" +
    "64,49,66,75,28,84,53\n" +
    "69,11,22,81,74,99,36,24,71,26,46,39,12\n" +
    "32,66,37,87,69,97,23,34,89,41,22,67,53,11,88,19,77\n" +
    "67,34,66,23,77,87,33,19,18,41,32,84,68,69,11,22,81\n" +
    "91,43,46,88,72,75,49,13,67,15,21,66,64,53,62,71,12\n" +
    "37,81,74,24,85,26,46,39,64\n" +
    "74,99,36,46,12,43,91\n" +
    "26,49,62,43,91,53,34,88,77,33,18\n" +
    "62,72,21,67,85,64,12,53,74,13,71,75,39,24,15,43,16,26,46,91,99\n" +
    "88,87,19,18,84,69,81\n" +
    "17,74,35,24,72,71,15,13,26,46,39,12,49,62,16,64,43,75,53\n" +
    "49,62,16,64,43,91,53,67,34,66,23,28,88,77,63,87,33,19,18,41,32,89,84\n" +
    "53,67,34,66,28,88,77,63,87,33,19,18,41,32,89,69,45,11,22,37,97\n" +
    "45,74,68,24,37,13,41,15,35,17,11\n" +
    "62,64,16,12,32,89,91\n" +
    "68,69,11,22,37,97,81,94,99,24,72,71,15,85,13,46,39\n" +
    "63,87,32,84,68,22,37,94,17,74,99\n" +
    "22,37,97,17,36,35,85,13,26,46,16\n" +
    "22,81,26,11,45,69,46,72,84,37,21,13,15\n" +
    "33,19,77,81,28,18,41,34,89,23,63,67,11,87,37,66,68,97,22\n" +
    "43,75,91,67,34,66,23,28,88,77,63,87,33,19,18,32,84,68,69,45,11\n" +
    "69,45,11,22,37,97,81,17,74,99,36,24,72,71,15,85,13,26,46,39,12\n" +
    "49,62,16,64,43,75,53,67,66,23,88,87,33,32,89\n" +
    "64,43,75,91,53,67,34,23,28,88,77,63,87,19,32,89,84,68,45\n" +
    "23,88,63,18,89,84,22,81,94\n" +
    "26,39,49,62,64,43,53,34,23,28,63,87,18\n" +
    "66,23,28,88,77,63,87,33,19,18,41,32,84,68,69,45,11,22,37,97,81,94,17\n" +
    "18,94,89,36,35,22,77,74,99,19,69,97,63\n" +
    "35,24,94,32,85,36,69,15,37,81,97,11,74,72,17,45,22\n" +
    "11,37,94,99,24,15,85,21,26,49,62\n" +
    "66,18,88,32,64,75,34,43,23,62,63,84,19,87,89,53,33\n" +
    "12,49,62,16,64,43,53,67,34,66,23,28,88,77,63,19,18,32,89\n" +
    "19,41,89,84,37,81,74,36,24,71,15\n" +
    "41,37,74,99,36,15,13\n" +
    "17,22,46,69,94,81,74,68,99,36,85,21,45\n" +
    "34,66,33,18,11,97,94\n" +
    "32,84,68,11,22,94,24,71,85\n" +
    "94,17,74,99,36,35,72,71,85,13,21,26,46,39,12,49,62,16,64,43,91\n" +
    "15,85,13,21,26,46,39,12,49,62,16,64,43,75,53,67,34,66,23,28,88,77,63\n" +
    "74,99,35,24,72,71,15,85,13,21,26,39,49,64,75,53,67\n" +
    "97,37,81,41,88,19,77,45,36,84,89,69,94,87,22,33,17\n" +
    "69,45,22,37,97,81,17,74,99,36,35,72,15,85,13,21,26,46,39\n" +
    "67,63,22,28,53,37,34\n" +
    "21,71,26,16,62,35,46,39,17,36,72,43,64,24,75,13,99,15,49,94,12,74,81\n" +
    "39,12,49,62,64,43,91,67,66,23,28,88,63,87,33,19,32\n" +
    "77,88,67,46,53,26,12,39,16,75,33,62,66,13,63,49,34,64,87,21,91\n" +
    "41,11,34,89,19,69,32,91,53,28,67,45,84,37,33,18,23\n" +
    "39,77,49,23,66\n" +
    "45,36,17,89,74\n" +
    "45,11,74,99,24,71,13,12,49\n" +
    "66,23,28,88,77,63,87,33,32,89,68,69,45,11,22,37,97,81,17\n" +
    "19,18,41,32,89,68,11,37,97,81,17,74,99,36,35,24,72,71,15\n" +
    "23,77,91,16,12,39,63,75,64,66,32,67,33\n" +
    "67,34,88,77,63,33,18,41,32,89,84,68,69,45,11,22,37,97,81\n" +
    "97,81,94,17,74,99,36,35,24,72,71,15,85,13,21,46,39,12,49,62,16,64,43\n" +
    "69,68,37,18,77,99,17,97,84,81,63,32,45,35,94,19,89,87,41\n" +
    "75,34,43,46,21,62,15,16,88,91,67,23,77,26,13,64,85,63,39\n" +
    "28,88,33,19,41,89,84,68,69,45,11,22,97\n" +
    "49,62,16,64,75,91,67,34,23,28,63,33,84\n" +
    "19,18,41,32,89,84,68,69,45,11,22,37,97,81,74,36,35,24,72,71,15\n" +
    "33,41,99,71,74,19,11\n" +
    "77,45,41,53,23,69,64,87,75\n" +
    "63,81,68,23,77,11,19,41,34,28,45,18,94\n" +
    "87,11,53,32,33,63,18,22,23,69,91,34,68,67,89,75,45,77,66,28,19\n" +
    "18,41,89,84,37,97,94,17,74,36,35,24,71,15,85\n" +
    "71,24,21,74,94,64,17,91,49\n" +
    "62,16,64,43,53,67,28,77,63,87,33,19,18,41,89,84,68\n" +
    "28,88,77,63,87,33,19,18,41,32,89,84,68,45,11,22,37,97,81,94,17,74,99\n" +
    "21,26,46,39,12,49,16,64,43,75,91,53,67,34,28,88,77,63,87,33,19\n" +
    "43,75,91,23,19,18,41,32,89,84,11\n" +
    "81,22,45,84,89,41,77,35,33\n" +
    "69,45,11,22,37,97,81,94,17,74,99,36,24,72,71,15,85,13,21,26,46,39,12\n" +
    "75,49,28,66,88,41,12,23,91,53,32,67,19,64,43,39,87,16,33,62,18,77,34\n" +
    "88,77,63,19,32,89,84,68,69,45,11,22,37,97,36\n" +
    "64,75,66,62,21,34,36\n" +
    "99,26,46,34,12,53,36,75,62,13,24\n" +
    "21,26,46,39,49,64,43,75,91,67,23,88,77,63,87,33,19\n" +
    "19,18,32,68,11,22,97,74,99,35,72,71,15\n" +
    "32,89,22,97,94,17,74,99,36,24,15\n" +
    "67,34,23,28,88,77,63,87,19,18,41,89,84,68,69,45,11,22,37,97,81\n" +
    "53,49,75,13,46,71,26,62,85,67,28,88,43,91,77,21,16,66,23,12,15"


const testInput = "47|53\n" +
    "97|13\n" +
    "97|61\n" +
    "97|47\n" +
    "75|29\n" +
    "61|13\n" +
    "75|53\n" +
    "29|13\n" +
    "97|29\n" +
    "53|29\n" +
    "61|53\n" +
    "97|53\n" +
    "61|29\n" +
    "47|13\n" +
    "75|47\n" +
    "97|75\n" +
    "47|61\n" +
    "75|61\n" +
    "47|29\n" +
    "75|13\n" +
    "53|13\n" +
    "\n\n" +
    "75,47,61,53,29\n" +
    "97,61,53,29,13\n" +
    "75,29,13\n" +
    "75,97,47,61,53\n" +
    "61,13,29\n" +
    "97,13,75,29,47"

const [rulesSet, updatesSet] = input.split('\n\n')

const rules = rulesSet.split('\n').map((rule) => rule.split('|').map(Number))
const updates = updatesSet.split('\n').map((update) => update.split(',').map(Number)).filter(set => set.length > 1)

let totalSum = 0

const rulesMap = {}

function findMiddlePage(update) {
    return update[Math.floor(update.length / 2)];
}

rules.forEach(([x, y]) => {
    let values = []

    if(rulesMap[x]) {
        values = rulesMap[x]
    }

    values.push(y)

    rulesMap[x] = values
})

function topologicalSort(graph, update) {
    const inDegree = {}
    const subGraph = {}

    for (const page of update) {
        inDegree[page] = 0
        subGraph[page] = []
    }


    for(const x in graph) {
        for(const y of graph[x]) {
            if(x in subGraph && y in subGraph) {
                subGraph[x].push(y)
                inDegree[y]++
            }
        }
    }

    const queue = [];
    for (const page in inDegree) {
        if (inDegree[page] === 0) {
            queue.push(parseInt(page));
        }
    }


    const sorted = [];
    while (queue.length > 0) {
        const current = queue.shift();
        sorted.push(current);

        for (const neighbor of subGraph[current]) {
            inDegree[neighbor]--;
            if (inDegree[neighbor] === 0) {
                queue.push(neighbor);
            }
        }
    }

    return sorted;
}

const incorrectOrder = []

for(let i = 0; i < updates.length; i++) {

    let correctUpdate = true;

    for(let j = 0; j < updates[i].length; j++) {
        const page = updates[i][j]

        const needToCheck = updates[i].slice(j+1, updates[i].length)

        const pageRule = rulesMap[page]

        for(let checkIndex = 0; checkIndex < needToCheck.length; checkIndex++) {
            if(!pageRule?.includes(needToCheck[checkIndex])) {
                correctUpdate = false;
                break;
            }
        }

        if(!correctUpdate) {
            break;
        }

    }

    if(correctUpdate) {
        totalSum += findMiddlePage(updates[i])
        continue
    }

    incorrectOrder.push(updates[i])
}

let fixedOrderSum = 0

incorrectOrder.forEach((pageOrder) => {
    const sortedUpdate = topologicalSort(rulesMap, pageOrder)
    fixedOrderSum += findMiddlePage(sortedUpdate)
})

console.log(fixedOrderSum)