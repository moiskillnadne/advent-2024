
# День 3: Порассуждать

«Наши компьютеры снова дают сбои, так что я понятия не имею, есть ли у нас Главные Историки в наличии! Но вы можете проверить на складе», — говорит слегка взволнованный владелец магазина Северополярной аренды санок. Историки отправляются на проверку.

Продавец обращается к вам. «Можете ли вы посмотреть, почему наши компьютеры снова вышли из строя?»

Компьютер, похоже, пытается запустить программу, но его память (ваш ввод для головоломки) повреждена. Все инструкции перемешаны!

Кажется, цель программы — просто перемножать некоторые числа. Она делает это с помощью инструкций вида mul(X,Y), где X и Y — это числа из 1-3 цифр. Например, mul(44,46) умножает 44 на 46 и получает результат 2024. Аналогично, mul(123,4) умножит 123 на 4.

Однако, поскольку память программы повреждена, в ней также содержатся множество недопустимых символов, которые нужно игнорировать, даже если они выглядят как часть инструкции mul. Последовательности вроде mul(4*, mul(6,9!, ?(12,34) или mul ( 2 , 4 ) ничего не делают.

**Например, рассмотрим следующий фрагмент поврежденной памяти:**

````
xmul(2,4)%&mul[3,7]!@^do_not_mul(5,5)+mul(32,64]then(mul(11,8)mul(8,5))
````

Только четыре выделенные секции являются настоящими инструкциями mul. Сложив результаты каждой инструкции, мы получаем 161 (2*4 + 5*5 + 11*8 + 8*5).

Просканируйте поврежденную память на предмет неповрежденных инструкций mul. **Что вы получите, если сложите все результаты умножений?**

## Часть Вторая

Во время сканирования поврежденной памяти вы замечаете, что некоторые условные операторы также остались неповрежденными. Если обработать некоторые из неповрежденных условных операторов в программе, вы можете получить ещё более точный результат.

Появляются две новые инструкции, которые вам нужно будет обрабатывать:

- Инструкция do() включает выполнение следующих инструкций mul.
- Инструкция don't() отключает выполнение следующих инструкций mul.
- Применяется только последняя инструкция do() или don't(). В начале программы инструкции mul включены.

**Например:**

````
xmul(2,4)&mul[3,7]!^don't()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))
````

Эта поврежденная память аналогична предыдущему примеру, но на этот раз инструкции mul(5,5) и mul(11,8) отключены из-за инструкции don't(), которая находится перед ними. Остальные инструкции mul работают нормально, включая последнюю, которая снова включается благодаря инструкции do().

На этот раз сумма результатов составляет 48 (2*4 + 8*5).

Обработайте новые инструкции; **что вы получите, если сложите все результаты только включенных умножений?**
